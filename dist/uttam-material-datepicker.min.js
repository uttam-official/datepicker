var g=class h{constructor(t,e,i={}){this.element=t,this.inputEl=e,this.options=i;let n=i.initDate?new Date(i.initDate):new Date;this.date=n,this.selectedDate=new Date(n),this.view="days",this.minDate=i.minDate?new Date(i.minDate):null,this.maxDate=i.maxDate?new Date(i.maxDate):null,this.format=i.format||"d-m-Y";let r=typeof i.type=="string"?i.type.toLowerCase():"";this.pickerType=["date","datetime","time"].includes(r)?r:"date",this.hasDate=this.pickerType!=="time",this.hasTime=this.pickerType!=="date";let o=typeof i.timeMode=="string"?i.timeMode:"",a=i.timeFormat,s=h.inferTimeMode(a||"HH:mm");this.timeMode=o==="12"||o==="24"?o:s,this.timeFormat=a||(this.timeMode==="12"?"hh:mm A":"HH:mm"),this.dateTimeSeparator=i.dateTimeSeparator||" ",this.timeStepMinutes=Number.isFinite(i.timeStepMinutes)?Math.max(1,Math.min(59,Math.floor(i.timeStepMinutes))):1,this.time={hours:n.getHours(),minutes:n.getMinutes()},this.normalizeTimeToStep(),this.init()}init(){this.render(),this.attachEvents(),this.applyInitialTimeValueIfNeeded()}render(){let t=this.hasDate?`
                <div class="mdp-header">
                    <div class="mdp-nav mdp-prev">
                    <svg xmlns="http://www.w3.org/2000/svg" width="7.4985" height="12.557" viewBox="0 0 4.999 8.371" fill="white">
                        <path id="angle-left-svgrepo-com" d="M13.75,16.25a.74.74,0,0,1-.53-.22l-3.5-3.5a.75.75,0,0,1,0-1.06L13.22,8a.75.75,0,0,1,1.06,1l-3,3,3,3a.75.75,0,0,1,0,1.06A.74.74,0,0,1,13.75,16.25Z" transform="translate(-9.501 -7.879)"/>
                    </svg>
                    </div>
                    <div class="mdp-title">${this.getHeaderTitle()}</div>
                    <div class="mdp-nav mdp-next">
                    <svg xmlns="http://www.w3.org/2000/svg" width="7.4985" height="12.519" viewBox="0 0 4.999 8.346" fill="white">
                        <path id="angle-right-svgrepo-com" d="M10.25,16.25A.74.74,0,0,1,9.72,16a.75.75,0,0,1,0-1.06l3-3-3-3A.75.75,0,0,1,10.78,8l3.5,3.5a.75.75,0,0,1,0,1.06L10.78,16a.74.74,0,0,1-.53.25Z" transform="translate(-9.501 -7.904)"/>
                    </svg>
                    </div>
                </div>`:"",e=this.hasDate?`<div class="mdp-body">${this.renderBody()}</div>`:"",i=this.hasTime?this.renderTime():"",n=this.hasTime?this.renderActions():"";this.element.innerHTML=`
        <div class="uttam-mdp">
            <div class="mdp-container${this.hasDate?"":" mdp-time-only"}">
                ${t}
                ${e}
                ${i}
                ${n}
            </div>
        </div>`}getHeaderTitle(){let t=["January","February","March","April","May","June","July","August","September","October","November","December"];if(this.view==="days")return`${t[this.date.getMonth()]} ${this.date.getFullYear()}`;if(this.view==="months")return this.date.getFullYear();let e=Math.floor(this.date.getFullYear()/12)*12;return`${e} - ${e+11}`}renderBody(){return this.hasDate?this.view==="days"?this.renderDays():this.view==="months"?this.renderMonths():this.renderYears():""}renderDays(){let t=this.date.getFullYear(),e=this.date.getMonth(),i=new Date(t,e,1).getDay(),n=new Date(t,e+1,0).getDate(),r='<div class="mdp-grid">';r+=["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>`<div class="mdp-day-header">${s}</div>`).join("");for(let s=0;s<i;s++)r+="<div></div>";let a=h.parseDateTimeFromInput(this.inputEl.value,this.format,this.pickerType,this.timeFormat,this.dateTimeSeparator);for(let s=1;s<=n;s++){let l=new Date(t,e,s),d=!1,c=!1,m=!1;this.minDate&&l<this.minDate&&(d=!0),this.maxDate&&l>this.maxDate&&(d=!0),a&&l.toDateString()===a.toDateString()&&(c=!0),l.toDateString()===new Date().toDateString()&&(m=!0),r+=`<div class="mdp-day${d?" disabled":""}${c?" selected":""}${m?" today":""}" data-day="${s}">${s}</div>`}return r+="</div>",r}renderTime(){let t=this.timeStepMinutes,e=this.timeMode==="12"?Array.from({length:12},(d,c)=>c+1):Array.from({length:24},(d,c)=>c),i=Array.from({length:Math.ceil(60/t)},(d,c)=>c*t).filter(d=>d<60),n=this.time.hours,r=this.timeMode==="12"?n%12||12:n,o=n>=12?"PM":"AM",a=e.map(d=>{let c=String(d).padStart(2,"0");return`<option value="${c}"${d===r?" selected":""}>${c}</option>`}).join(""),s=i.map(d=>{let c=String(d).padStart(2,"0"),m=d===this.time.minutes?" selected":"";return`<option value="${c}"${m}>${c}</option>`}).join(""),l=this.timeMode==="12"?`<div class="mdp-time-ampm-group" role="group" aria-label="AM/PM">
                <button type="button" class="mdp-time-ampm${o==="AM"?" is-active":""}" data-value="AM">AM</button>
                <button type="button" class="mdp-time-ampm${o==="PM"?" is-active":""}" data-value="PM">PM</button>
            </div>`:"";return`<div class="mdp-time">
            <div class="mdp-time-block">
                <select class="mdp-time-field" data-unit="hours" aria-label="Hours">
                    ${a}
                </select>
                <div class="mdp-time-label">Hour</div>
            </div>
            <div class="mdp-time-colon">:</div>
            <div class="mdp-time-block">
                <select class="mdp-time-field" data-unit="minutes" aria-label="Minutes">
                    ${s}
                </select>
                <div class="mdp-time-label">Minute</div>
            </div>
            ${l}
        </div>`}renderActions(){return`<div class="mdp-actions">
            <button type="button" class="mdp-action mdp-action-close" data-action="close">Close</button>
            <button type="button" class="mdp-action mdp-action-done" data-action="done">Done</button>
        </div>`}renderMonths(){return`<div class="mdp-grid mdp-months">
            ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,i)=>`<div class="mdp-month" data-month="${i}">${e}</div>`).join("")}
        </div>`}renderYears(){let t=Math.floor(this.date.getFullYear()/12)*12;return`<div class="mdp-grid mdp-years">
            ${Array.from({length:12},(e,i)=>`<div class="mdp-year" data-year="${t+i}">${t+i}</div>`).join("")}
        </div>`}attachEvents(){let t=this.element.querySelector(".mdp-prev"),e=this.element.querySelector(".mdp-next"),i=this.element.querySelector(".mdp-title"),n=this.element.querySelector(".mdp-body"),r=this.element.querySelector(".mdp-time"),o=this.element.querySelector(".mdp-actions");t&&t.addEventListener("click",a=>{a.stopPropagation(),this.navigate(-1)}),e&&e.addEventListener("click",a=>{a.stopPropagation(),this.navigate(1)}),i&&i.addEventListener("click",a=>{a.stopPropagation(),this.view=this.view==="days"?"months":this.view==="months"?"years":"days",this.render(),this.attachEvents()}),n&&n.addEventListener("click",a=>{if(a.stopPropagation(),!a.target.classList.contains("disabled"))if(a.target.classList.contains("mdp-day")){let s=a.target.dataset.day,l=new Date(this.date.getFullYear(),this.date.getMonth(),s,this.time.hours,this.time.minutes);this.selectedDate=new Date(l),this.inputEl.value=this.formatOutput(l),this.pickerType==="date"?this.close():(this.render(),this.attachEvents())}else a.target.classList.contains("mdp-month")?(this.date.setMonth(a.target.dataset.month),this.view="days",this.render(),this.attachEvents()):a.target.classList.contains("mdp-year")&&(this.date.setFullYear(a.target.dataset.year),this.view="months",this.render(),this.attachEvents())}),r&&(r.addEventListener("change",a=>{a.target.classList.contains("mdp-time-field")&&(a.stopPropagation(),this.handleTimeChange())}),r.addEventListener("click",a=>{let s=a.target.closest(".mdp-time-ampm");s&&(a.stopPropagation(),this.handleTimeChange(s.dataset.value))})),o&&o.addEventListener("click",a=>{let s=a.target.closest(".mdp-action");s&&(a.stopPropagation(),s.dataset.action==="done"&&this.commitSelection(),this.close())})}navigate(t){this.view==="days"?this.date.setMonth(this.date.getMonth()+t):this.view==="months"?this.date.setFullYear(this.date.getFullYear()+t):this.view==="years"&&this.date.setFullYear(this.date.getFullYear()+t*12),this.render(),this.attachEvents()}formatDate(t){let e=String(t.getDate()).padStart(2,"0"),i=String(t.getDate()),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getMonth()+1),o=String(t.getFullYear()),a=o.slice(-2);return this.format.replace(/YYYY|YY|Y|dd|d|mm|m/g,s=>{switch(s){case"YYYY":case"Y":return o;case"YY":return a;case"dd":return e;case"d":return i;case"mm":return n;case"m":return r;default:return s}})}formatTime(t){let e=t.getHours(),i=e%12||12,n=String(i).padStart(2,"0"),r=String(i),o=String(e).padStart(2,"0"),a=String(e),s=String(t.getMinutes()).padStart(2,"0"),l=String(t.getMinutes()),d=e>=12?"PM":"AM",c=d.toLowerCase();return this.timeFormat.replace(/HH|H|hh|h|mm|m|A|a/g,m=>{switch(m){case"HH":return o;case"H":return a;case"hh":return n;case"h":return r;case"mm":return s;case"m":return l;case"A":return d;case"a":return c;default:return m}})}formatOutput(t){return this.pickerType==="date"?this.formatDate(t):this.pickerType==="time"?this.formatTime(t):`${this.formatDate(t)}${this.dateTimeSeparator}${this.formatTime(t)}`.trim()}updateTimeDisplay(){let t=this.element.querySelector('.mdp-time-field[data-unit="hours"]'),e=this.element.querySelector('.mdp-time-field[data-unit="minutes"]');if(t){let r=this.timeMode==="12"?this.time.hours%12||12:this.time.hours;t.value=String(r).padStart(2,"0")}e&&(e.value=String(this.time.minutes).padStart(2,"0"));let i=this.element.querySelector('.mdp-time-ampm[data-value="AM"]'),n=this.element.querySelector('.mdp-time-ampm[data-value="PM"]');if(i&&n){let r=this.time.hours>=12?"PM":"AM";i.classList.toggle("is-active",r==="AM"),n.classList.toggle("is-active",r==="PM")}}normalizeTimeToStep(){let t=this.timeStepMinutes;if(t<=1)return;let e=this.time.hours*60+this.time.minutes,n=(Math.round(e/t)*t%1440+1440)%1440;this.time.hours=Math.floor(n/60),this.time.minutes=n%60}handleTimeChange(t){let e=this.element.querySelector('.mdp-time-field[data-unit="hours"]'),i=this.element.querySelector('.mdp-time-field[data-unit="minutes"]');if(!e||!i)return;let n=parseInt(e.value,10),r=parseInt(i.value,10);if(Number.isNaN(n)||Number.isNaN(r))return;let o=n;if(this.timeMode==="12"){let a=t||(this.time.hours>=12?"PM":"AM");o===12?o=a==="AM"?0:12:a==="PM"&&(o+=12)}this.time.hours=o,this.time.minutes=r,this.syncTimeToInput(),this.updateTimeDisplay()}syncTimeToInput(){if(!this.hasTime)return;let t=this.selectedDate?new Date(this.selectedDate):new Date(this.date);t.setHours(this.time.hours,this.time.minutes,0,0),this.selectedDate=new Date(t),this.inputEl.value=this.formatOutput(t)}commitSelection(){let t=this.selectedDate?new Date(this.selectedDate):new Date(this.date);this.hasTime&&t.setHours(this.time.hours,this.time.minutes,0,0),this.selectedDate=new Date(t),this.inputEl.value=this.formatOutput(t)}applyInitialTimeValueIfNeeded(){if(this.pickerType!=="time"||this.inputEl.value)return;let t=new Date(this.date);t.setHours(this.time.hours,this.time.minutes,0,0),this.selectedDate=new Date(t),this.inputEl.value=this.formatOutput(t)}static parseDateFromFormat(t,e){if(!t||!e)return null;let i=["YYYY","YY","Y","dd","d","mm","m"],n={YYYY:"(\\d{4})",YY:"(\\d{2})",Y:"(\\d{4})",dd:"(\\d{2})",d:"(\\d{1,2})",mm:"(\\d{2})",m:"(\\d{1,2})"},r="",o=[];for(let m=0;m<e.length;){let p=null;for(let u of i)if(e.startsWith(u,m)){p=u;break}if(p)r+=n[p],o.push(p),m+=p.length;else{let u=e[m];r+=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),m+=1}}let a=t.match(new RegExp(`^${r}$`));if(!a)return null;let s,l,d;if(o.forEach((m,p)=>{let u=parseInt(a[p+1],10);(m==="d"||m==="dd")&&(s=u),(m==="m"||m==="mm")&&(l=u),(m==="Y"||m==="YYYY")&&(d=u),m==="YY"&&(d=2e3+u)}),!s||!l||!d)return null;let c=new Date(d,l-1,s);return Number.isNaN(c.getTime())||c.getFullYear()!==d||c.getMonth()!==l-1||c.getDate()!==s?null:c}static swapDayMonthFormat(t){if(!t)return null;let e=["YYYY","YY","Y","dd","d","mm","m"],i="",n=!1;for(let r=0;r<t.length;){let o=null;for(let a of e)if(t.startsWith(a,r)){o=a;break}o?(o==="d"?(i+="m",n=!0):o==="dd"?(i+="mm",n=!0):o==="m"?(i+="d",n=!0):o==="mm"?(i+="dd",n=!0):i+=o,r+=o.length):(i+=t[r],r+=1)}return n?i:null}static parseDateFromFormatWithSwap(t,e){let i=h.parseDateFromFormat(t,e);if(i)return i;let n=h.swapDayMonthFormat(e);return!n||n===e?null:h.parseDateFromFormat(t,n)}static inferDateFormatsFromValue(t){if(!t)return[];let e=null;return t.includes("-")?e="-":t.includes("/")&&(e="/"),e?[`d${e}m${e}Y`,`m${e}d${e}Y`,`Y${e}m${e}d`]:[]}static parseDateWithFallback(t,e){let i=h.parseDateFromFormatWithSwap(t,e);if(i)return i;let n=h.inferDateFormatsFromValue(t);for(let r of n){let o=h.parseDateFromFormat(t,r);if(o)return o}return null}static parseTimeFromFormat(t,e){if(!t||!e)return null;let i=["HH","H","hh","h","mm","m","A","a"],n={HH:"(\\d{2})",H:"(\\d{1,2})",hh:"(\\d{2})",h:"(\\d{1,2})",mm:"(\\d{2})",m:"(\\d{1,2})",A:"(AM|PM)",a:"(am|pm)"},r="",o=[];for(let m=0;m<e.length;){let p=null;for(let u of i)if(e.startsWith(u,m)){p=u;break}if(p)r+=n[p],o.push(p),m+=p.length;else{let u=e[m];r+=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),m+=1}}let a=t.match(new RegExp(`^${r}$`));if(!a)return null;let s,l=0,d=!1,c=null;if(o.forEach((m,p)=>{let u=a[p+1],f=parseInt(u,10);(m==="HH"||m==="H")&&(s=f),(m==="hh"||m==="h")&&(s=f,d=!0),(m==="mm"||m==="m")&&(l=f),(m==="A"||m==="a")&&(c=u.toUpperCase())}),s==null||l==null)return null;if(d){if(s<1||s>12)return null;c==="PM"&&s<12&&(s+=12),c==="AM"&&s===12&&(s=0)}return s<0||s>23||l<0||l>59?null:{hours:s,minutes:l}}static inferTimeFormatFromValue(t){return t&&/am|pm/i.test(t)?"hh:mm A":"HH:mm"}static inferTimeMode(t){return t&&(t.includes("h")||t.includes("A")||t.includes("a"))?"12":"24"}static parseDateTimeFromInput(t,e,i,n,r){if(!t)return null;if(i==="date")return h.parseDateWithFallback(t,e);if(i==="time"){let s=h.parseTimeFromFormat(t,n);if(!s){let d=h.inferTimeFormatFromValue(t);d!==n&&(s=h.parseTimeFromFormat(t,d))}if(!s)return null;let l=new Date;return l.setHours(s.hours,s.minutes,0,0),l}let o=r??" ",a=[];if(o&&t.includes(o)){let s=t.lastIndexOf(o);if(a.push({datePart:t.slice(0,s),timePart:t.slice(s+o.length)}),o===" "){let l=t.indexOf(o);l!==s&&a.push({datePart:t.slice(0,l),timePart:t.slice(l+o.length)})}}else a.push({datePart:t,timePart:""});for(let s of a){let l=h.parseDateWithFallback(s.datePart.trim(),e);if(!l)continue;let d=s.timePart.trim(),c=d?h.parseTimeFromFormat(d,n):null;if(!c&&d){let m=h.inferTimeFormatFromValue(d);m!==n&&(c=h.parseTimeFromFormat(d,m))}return c&&l.setHours(c.hours,c.minutes,0,0),l}return null}close(){this.element.style.display="none"}};function D(h=".datepicker",t={}){let e=document.createElement("div");e.id="uttam-mdp-popup",e.style.position="absolute",e.style.zIndex="9999",e.style.display="none",document.body.appendChild(e),document.querySelectorAll(h).forEach(i=>{i.addEventListener("focus",n=>{let r=i.getBoundingClientRect();e.style.display="block",e.innerHTML="",new g(e,i,t);let o=e.offsetHeight||350;e.style.display="none";let a=window.innerHeight-r.bottom,s=r.top,l;a<o&&s>o?l=r.top+window.scrollY-o-8:l=r.bottom+window.scrollY+5,e.style.display="block",e.style.top=l+"px",e.style.left=r.left+"px";let d=e.getBoundingClientRect();d.right>window.innerWidth?e.style.left=window.innerWidth-d.width-10+"px":d.left<0&&(e.style.left="10px");let c=new Date,m=t.format||"d-m-Y",p=typeof t.type=="string"?t.type.toLowerCase():"",u=["date","datetime","time"].includes(p)?p:"date",f=t.timeFormat||"HH:mm",v=t.dateTimeSeparator||" ",y=g.parseDateTimeFromInput(i.value,m,u,f,v);y&&(c=y),new g(e,i,{...t,initDate:c})})}),document.addEventListener("click",i=>{!e.contains(i.target)&&!i.target.matches(h)&&(e.style.display="none")})}typeof window<"u"&&(window.initDatepicker=D);export{D as initDatepicker};
